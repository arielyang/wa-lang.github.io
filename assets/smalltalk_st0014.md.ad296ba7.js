import{_ as e,c as l,o as t,a as s}from"./app.4bd23fa7.js";const a="/st0014-a.jpg",n="/st0014-b.jpg",r="/st0014-c.jpg",d="/st0014-e.png",o="/st0014-f.png",i="/st0014-g.png",w=JSON.parse('{"title":"\u51F9\u8BED\u8A00\u70B9\u4EAE AVR \u5355\u7247\u673A","description":"","frontmatter":{},"headers":[{"level":3,"title":"\u5B89\u88C5\u51F9\u8BED\u8A00","slug":"\u5B89\u88C5\u51F9\u8BED\u8A00","link":"#\u5B89\u88C5\u51F9\u8BED\u8A00","children":[]},{"level":3,"title":"\u5B89\u88C5 Arduino \u5F00\u53D1\u73AF\u5883","slug":"\u5B89\u88C5-arduino-\u5F00\u53D1\u73AF\u5883","link":"#\u5B89\u88C5-arduino-\u5F00\u53D1\u73AF\u5883","children":[]},{"level":3,"title":"\u5B89\u88C5 LLVM","slug":"\u5B89\u88C5-llvm","link":"#\u5B89\u88C5-llvm","children":[]},{"level":3,"title":"\u6DFB\u52A0\u8DEF\u5F84","slug":"\u6DFB\u52A0\u8DEF\u5F84","link":"#\u6DFB\u52A0\u8DEF\u5F84","children":[]},{"level":3,"title":"\u786C\u4EF6\u4FE1\u606F","slug":"\u786C\u4EF6\u4FE1\u606F","link":"#\u786C\u4EF6\u4FE1\u606F","children":[]},{"level":3,"title":"\u63A5\u7EBF\u65B9\u5F0F","slug":"\u63A5\u7EBF\u65B9\u5F0F","link":"#\u63A5\u7EBF\u65B9\u5F0F","children":[]}],"relativePath":"smalltalk/st0014.md"}'),p={name:"smalltalk/st0014.md"},c=s('<h1 id="\u51F9\u8BED\u8A00\u70B9\u4EAE-avr-\u5355\u7247\u673A" tabindex="-1">\u51F9\u8BED\u8A00\u70B9\u4EAE AVR \u5355\u7247\u673A <a class="header-anchor" href="#\u51F9\u8BED\u8A00\u70B9\u4EAE-avr-\u5355\u7247\u673A" aria-hidden="true">#</a></h1><ul><li>\u65F6\u95F4\uFF1A2022-11-24</li><li>\u64B0\u7A3F\uFF1A\u53F2\u658C@\u51F9\u8BED\u8A00</li><li>\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u539F\u6587\u94FE\u63A5\uFF1A<a href="https://wa-lang.org/smalltalk/st0014.html" target="_blank" rel="noreferrer">https://wa-lang.org/smalltalk/st0014.html</a></li></ul><p>\u76EE\u524D\u51F9\u8BED\u8A00\u5DF2\u7ECF\u6210\u529F\u8FD0\u884C\u5728 Arduino \u5355\u7247\u673A\u5E73\u53F0\u4E0A\uFF0C\u4E0B\u9762\u662F\u8FD0\u884C\u6548\u679C\uFF0C\u4E00\u4E2A\u56DB\u4F4D\u8BA1\u6570\u5668\u3002</p><p><img src="'+a+`" alt="alt 0"></p><p>\u611F\u5174\u8DA3\u7684\u540C\u5B66\uFF0C\u53EF\u4EE5\u53C2\u7167\u6211\u63D0\u4F9B\u7684\u6B65\u9AA4\uFF0C\u6765\u4F53\u9A8C\u4E00\u4E0B\u3002</p><hr><h1 id="\u5B89\u88C5\u5F00\u53D1\u73AF\u5883" tabindex="-1">\u5B89\u88C5\u5F00\u53D1\u73AF\u5883 <a class="header-anchor" href="#\u5B89\u88C5\u5F00\u53D1\u73AF\u5883" aria-hidden="true">#</a></h1><h3 id="\u5B89\u88C5\u51F9\u8BED\u8A00" tabindex="-1">\u5B89\u88C5\u51F9\u8BED\u8A00 <a class="header-anchor" href="#\u5B89\u88C5\u51F9\u8BED\u8A00" aria-hidden="true">#</a></h3><p>\u63A8\u8350\u624B\u52A8\u4E0B\u8F7D\u7F16\u8BD1\u6700\u65B0\u7684\u7248\u672C\u3002</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#d8dee9ff;">cd $HOME</span></span>
<span class="line"><span style="color:#d8dee9ff;">git clone https://gitee.com/wa-lang/wa.git</span></span>
<span class="line"><span style="color:#d8dee9ff;">cd wa</span></span>
<span class="line"><span style="color:#d8dee9ff;">go build</span></span>
<span class="line"><span style="color:#d8dee9ff;">export PATH=$HOME/wa:$PATH</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre></div><h3 id="\u5B89\u88C5-arduino-\u5F00\u53D1\u73AF\u5883" tabindex="-1">\u5B89\u88C5 Arduino \u5F00\u53D1\u73AF\u5883 <a class="header-anchor" href="#\u5B89\u88C5-arduino-\u5F00\u53D1\u73AF\u5883" aria-hidden="true">#</a></h3><ul><li><a href="https://downloads.arduino.cc/arduino-1.8.19-windows.exe" target="_blank" rel="noreferrer">Windows \u4E0B\u8F7D</a></li><li><a href="https://downloads.arduino.cc/arduino-1.8.19-macosx.zip" target="_blank" rel="noreferrer">MacOS \u4E0B\u8F7D</a></li><li><a href="https://downloads.arduino.cc/arduino-1.8.19-linux64.tar.xz" target="_blank" rel="noreferrer">Linux \u4E0B\u8F7D</a></li></ul><h3 id="\u5B89\u88C5-llvm" tabindex="-1">\u5B89\u88C5 LLVM <a class="header-anchor" href="#\u5B89\u88C5-llvm" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/llvm/llvm-project/releases/download/llvmorg-14.0.6/LLVM-14.0.6-win64.exe" target="_blank" rel="noreferrer">Windows \u4E0B\u8F7D</a></li><li><a href="https://github.com/llvm/llvm-project/releases/download/llvmorg-14.0.6/clang+llvm-14.0.6-x86_64-apple-darwin.tar.xz" target="_blank" rel="noreferrer">MacOS \u4E0B\u8F7D</a></li><li>Linux \u5B89\u88C5\u65B9\u5F0F</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#d8dee9ff;">apt-get install llvm clang -y</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre></div><h3 id="\u6DFB\u52A0\u8DEF\u5F84" tabindex="-1">\u6DFB\u52A0\u8DEF\u5F84 <a class="header-anchor" href="#\u6DFB\u52A0\u8DEF\u5F84" aria-hidden="true">#</a></h3><p>\u5B89\u88C5\u5B8C\u6210\u540E\uFF0C\u9700\u8981\u628A LLVM \u5305\u91CC\u7684 bin \u76EE\u5F55\uFF0C\u52A0\u5165 PATH \u73AF\u5883\u53D8\u91CF\u3002\u5728 Linux \u548C MacOS \u4E0A\u6309\u7167\u5982\u4E0B\u65B9\u5F0F\u64CD\u4F5C\u3002</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#d8dee9ff;">export LLVM_PATH=...</span></span>
<span class="line"><span style="color:#d8dee9ff;">export PATH=$LLVM_PATH/bin:$PATH</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre></div><p>Windows \u4E0A\u53EF\u4EE5\u5728 PowerShell \u91CC\u6DFB\u52A0\uFF0C\u6216\u8005\u4FEE\u6539\u7CFB\u7EDF\u8BBE\u7F6E\u3002</p><hr><h1 id="\u8D2D\u4E70\u786C\u4EF6\u548C\u5B89\u88C5\u786C\u4EF6" tabindex="-1">\u8D2D\u4E70\u786C\u4EF6\u548C\u5B89\u88C5\u786C\u4EF6 <a class="header-anchor" href="#\u8D2D\u4E70\u786C\u4EF6\u548C\u5B89\u88C5\u786C\u4EF6" aria-hidden="true">#</a></h1><h3 id="\u786C\u4EF6\u4FE1\u606F" tabindex="-1">\u786C\u4EF6\u4FE1\u606F <a class="header-anchor" href="#\u786C\u4EF6\u4FE1\u606F" aria-hidden="true">#</a></h3><ul><li><p>Arduino Uno \u5F00\u53D1\u677F</p><p><a href="https://detail.tmall.com/item.htm?spm=a230r.1.14.27.820a6558z3MTpC&amp;id=680267988615&amp;ns=1&amp;abbucket=13&amp;skuId=5049455218939" target="_blank" rel="noreferrer">arduino nano uno\u5F00\u53D1\u677F\u5957\u4EF6 r3\u4E3B\u677F\u6539\u8FDB\u7248ATmega328P \u5355\u7247\u673A\u6A21\u5757-tmall.com\u5929\u732B</a></p></li><li><p>\u56DB\u6BB5\u6570\u7801\u7BA1\u6A21\u5757</p><p><a href="https://detail.tmall.com/item.htm?_u=j2lbgljge8f5&amp;id=621236815267" target="_blank" rel="noreferrer">0.4\u5BF8 \u56DB\u4F4D\u6570\u7801\u7BA1\u663E\u793A\u6A21\u5757 74HC595\u9A71\u52A8 4\u4F4D\u6570\u7801\u7BA1 \u517C\u5BB9Arduino-tmall.com\u5929\u732B</a></p></li></ul><h3 id="\u63A5\u7EBF\u65B9\u5F0F" tabindex="-1">\u63A5\u7EBF\u65B9\u5F0F <a class="header-anchor" href="#\u63A5\u7EBF\u65B9\u5F0F" aria-hidden="true">#</a></h3><table><thead><tr><th>Arduino \u677F</th><th>\u6570\u7801\u7BA1\u5C0F\u677F</th><th>\u989C\u8272</th></tr></thead><tbody><tr><td>5V</td><td>VCC</td><td>\u7EFF</td></tr><tr><td>2</td><td>SCLK</td><td>\u9EC4</td></tr><tr><td>1</td><td>RCLK</td><td>\u6A59</td></tr><tr><td>0</td><td>DIO</td><td>\u7EA2</td></tr><tr><td>GND</td><td>GND</td><td>\u68D5</td></tr></tbody></table><p><img src="`+a+'" alt="alt 1"><img src="'+n+'" alt="alt 2"><img src="'+r+`" alt="alt 3"></p><hr><h1 id="\u7F16\u8BD1\u8FD0\u884C-demo-\u7A0B\u5E8F" tabindex="-1">\u7F16\u8BD1\u8FD0\u884C Demo \u7A0B\u5E8F <a class="header-anchor" href="#\u7F16\u8BD1\u8FD0\u884C-demo-\u7A0B\u5E8F" aria-hidden="true">#</a></h1><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#d8dee9ff;"># \u9700\u8981\u9884\u5148\u5B89\u88C5 WA \u548C LLVM\uFF0C\u6309\u7167\u672C\u6587\u524D\u9762\u7684\u64CD\u4F5C\u6307\u5BFC\u8FDB\u884C\u3002</span></span>
<span class="line"><span style="color:#d8dee9ff;">cd $HOME</span></span>
<span class="line"><span style="color:#d8dee9ff;">git clone https://gitee.com/wa-lang/wa-arduino.git</span></span>
<span class="line"><span style="color:#d8dee9ff;">cd $HOME/wa-arduino/4-digit_led/demo_wa/</span></span>
<span class="line"><span style="color:#d8dee9ff;">wa native --target=avr demo.wa</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre></div><p>\u5C06\u4F1A\u5728 <code>demo_wa/</code> \u76EE\u5F55\u4E0B\u751F\u6210\u4E00\u4E2A\u5B50\u76EE\u5F55 <code>demo/</code>\uFF0C\u91CC\u9762\u5305\u542B\u4E86\u7F16\u8BD1\u751F\u6210\u7684 Arduino \u5DE5\u7A0B\u3002\u7528 Arduino IDE \u6253\u5F00 <code>demo_wa/demo/demo.ino</code>\uFF0C\u9009\u62E9 Arduino Uno \u5F00\u53D1\u677F\u4EE5\u53CA\u5BF9\u5E94\u7684 COM \u7AEF\u53E3\uFF0C\u5373\u53EF\u8FD0\u884C\uFF0C\u770B\u5230\u56DB\u4F4D\u6570\u7801\u7BA1\u8BA1\u6570\u7684\u6548\u679C\u3002</p><p><img src="`+d+'" alt="alt 4"></p><hr><h1 id="\u7F16\u8BD1\u6D41\u7A0B" tabindex="-1">\u7F16\u8BD1\u6D41\u7A0B <a class="header-anchor" href="#\u7F16\u8BD1\u6D41\u7A0B" aria-hidden="true">#</a></h1><p>wa source ---&gt; LLVM IR ---&gt; AVR assembly.</p><p>Arduino \u5F00\u53D1\u677F\u73AF\u5883\u9700\u8981 Arduino \u7684 runtime \u5E93\u624D\u80FD\u6B63\u5E38\u8FD0\u884C\uFF0C\u56E0\u6B64\u8F93\u51FA\u7684\u662F Arduino \u5DE5\u7A0B\u3002\u5305\u542B\u4E00\u4E2A\u7B80\u77ED\u7684\u5305\u88C5\u6587\u4EF6 <code>demo.ino</code>\u3002</p><p><img src="'+o+'" alt="alt 5"></p><p>\u548C\u4ECE <code>demo.wa</code> \u7FFB\u8BD1\u8FC7\u6765\u7684 AVR \u6C47\u7F16\u7A0B\u5E8F <code>demo.S</code>\uFF0C\u8FD9\u624D\u662F\u771F\u6B63\u9A71\u52A8\u6570\u7801\u7BA1\u8BA1\u6570\u7684\u529F\u80FD\u4EE3\u7801\u3002</p><p><img src="'+i+'" alt="alt 6"></p><hr><h1 id="\u672A\u6765\u7684\u5DE5\u4F5C" tabindex="-1">\u672A\u6765\u7684\u5DE5\u4F5C <a class="header-anchor" href="#\u672A\u6765\u7684\u5DE5\u4F5C" aria-hidden="true">#</a></h1><ul><li>wa \u547D\u4EE4\u76F4\u63A5\u8F93\u51FA AVR \u7684 HEX \u6587\u4EF6</li><li>wa \u547D\u4EE4\u96C6\u6210 AVR \u70E7\u5F55\u5DE5\u5177 avrdude</li></ul>',41),h=[c];function u(f,m,g,_,b,v){return t(),l("div",null,h)}const k=e(p,[["render",u]]);export{w as __pageData,k as default};
